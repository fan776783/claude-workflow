---
description: æ™ºèƒ½ Git æäº¤ - è‡ªåŠ¨ç±»å‹æ¨æ–­ã€æ‹†åˆ†å»ºè®®ã€Conventional Commits æ ¼å¼
allowed-tools: Bash(git *)
examples:
  - /git-commit
    åˆ†æå½“å‰æ”¹åŠ¨ï¼Œç”Ÿæˆæäº¤ä¿¡æ¯
  - /git-commit --all
    æš‚å­˜æ‰€æœ‰æ”¹åŠ¨å¹¶æäº¤
  - /git-commit --no-verify
    è·³è¿‡ Git é’©å­æ£€æŸ¥
  - /git-commit --emoji
    åœ¨æäº¤ä¿¡æ¯ä¸­åŒ…å« emoji
---

# æ™ºèƒ½ Git æäº¤

ä»…é€šè¿‡ Git åˆ†ææ”¹åŠ¨å¹¶è‡ªåŠ¨ç”Ÿæˆ Conventional Commits é£æ ¼çš„æäº¤ä¿¡æ¯ã€‚

---

## Usage

```bash
/git-commit                           # åˆ†æå½“å‰æ”¹åŠ¨ï¼Œç”Ÿæˆæäº¤ä¿¡æ¯
/git-commit --all                     # æš‚å­˜æ‰€æœ‰æ”¹åŠ¨å¹¶æäº¤
/git-commit --no-verify               # è·³è¿‡ Git é’©å­æ£€æŸ¥
/git-commit --emoji                   # åœ¨æäº¤ä¿¡æ¯ä¸­åŒ…å« emoji
/git-commit --scope ui --type feat    # æŒ‡å®šä½œç”¨åŸŸå’Œç±»å‹
/git-commit --amend --signoff         # ä¿®è¡¥ä¸Šæ¬¡æäº¤å¹¶ç­¾å
```

### Options

| é€‰é¡¹ | è¯´æ˜ |
|------|------|
| `--no-verify` | è·³è¿‡æœ¬åœ° Git é’©å­ |
| `--all` | è‡ªåŠ¨æš‚å­˜æ‰€æœ‰æ”¹åŠ¨ |
| `--amend` | ä¿®è¡¥ä¸Šä¸€æ¬¡æäº¤ |
| `--signoff` | é™„åŠ  Signed-off-by è¡Œ |
| `--emoji` | åœ¨æäº¤ä¿¡æ¯ä¸­åŒ…å« emoji |
| `--scope <scope>` | æŒ‡å®šæäº¤ä½œç”¨åŸŸ |
| `--type <type>` | å¼ºåˆ¶æäº¤ç±»å‹ |

---

## æ‰§è¡Œæµç¨‹

1. **ä»“åº“æ ¡éªŒ**
   - `git rev-parse --is-inside-work-tree` éªŒè¯ Git ä»“åº“
   - æ£€æŸ¥æ˜¯å¦å¤„äº rebase/merge å†²çªçŠ¶æ€

2. **æ”¹åŠ¨æ£€æµ‹**
   - `git status --porcelain` è·å–æ”¹åŠ¨çŠ¶æ€
   - `git diff --cached` è·å–å·²æš‚å­˜æ”¹åŠ¨
   - è‹¥æ— æš‚å­˜ä¸”ä¼ å…¥ `--all`ï¼Œæ‰§è¡Œ `git add -A`

3. **æ‹†åˆ†å»ºè®®**
   - æŒ‰å…³æ³¨ç‚¹ã€æ–‡ä»¶æ¨¡å¼ã€æ”¹åŠ¨ç±»å‹èšç±»
   - è¶…è¿‡ 300 è¡Œæˆ–è·¨å¤šä¸ªé¡¶çº§ç›®å½•æ—¶å»ºè®®æ‹†åˆ†
   - ç»™å‡ºæ¯ç»„çš„ pathspec ä¾¿äºåˆ†ç»„æš‚å­˜

4. **ç±»å‹æ¨æ–­**

| å˜æ›´æ¨¡å¼ | æ¨æ–­ç±»å‹ |
|----------|----------|
| æ–°æ–‡ä»¶ + åŠŸèƒ½ä»£ç  | feat |
| ä¿®æ”¹ + bug fix å…³é”®è¯ | fix |
| ä»…é‡å‘½å/ç§»åŠ¨ | refactor |
| ä»…æ ·å¼/æ ¼å¼ | style |
| *.md / docs/ | docs |
| *.test.* / __tests__ | test |
| é…ç½®æ–‡ä»¶ | chore |

5. **æäº¤ä¿¡æ¯ç”Ÿæˆ**
   - æ ¼å¼ï¼š`[emoji] <type>(<scope>): <subject>`
   - é¦–è¡Œ â‰¤ 72 å­—ç¬¦ï¼Œç¥ˆä½¿è¯­æ°”
   - æ­£æ–‡åŒ…å«åŠ¨æœºã€å®ç°è¦ç‚¹ã€å½±å“èŒƒå›´
   - æ ¹æ®å†å²æäº¤è¯­è¨€é€‰æ‹©ä¸­æ–‡/è‹±æ–‡

6. **æ‰§è¡Œæäº¤**
   - `git commit -F .git/COMMIT_EDITMSG`
   - æ”¯æŒ `--amend`ã€`--signoff`ã€`--no-verify`

---

## Type ä¸ Emoji æ˜ å°„

| Emoji | Type | è¯´æ˜ |
|-------|------|------|
| âœ¨ | feat | æ–°å¢åŠŸèƒ½ |
| ğŸ› | fix | ç¼ºé™·ä¿®å¤ |
| ğŸ“ | docs | æ–‡æ¡£ä¸æ³¨é‡Š |
| ğŸ¨ | style | é£æ ¼/æ ¼å¼ |
| â™»ï¸ | refactor | é‡æ„ |
| âš¡ï¸ | perf | æ€§èƒ½ä¼˜åŒ– |
| âœ… | test | æµ‹è¯• |
| ğŸ”§ | chore | æ„å»º/å·¥å…· |
| ğŸ‘· | ci | CI/CD |
| âªï¸ | revert | å›æ»š |

---

## æ‹†åˆ†æäº¤æŒ‡å—

1. **ä¸åŒå…³æ³¨ç‚¹**ï¼šäº’ä¸ç›¸å…³çš„åŠŸèƒ½/æ¨¡å—æ”¹åŠ¨åº”æ‹†åˆ†
2. **ä¸åŒç±»å‹**ï¼šä¸è¦å°† featã€fixã€refactor æ··åœ¨åŒä¸€æäº¤
3. **æ–‡ä»¶æ¨¡å¼**ï¼šæºä»£ç  vs æ–‡æ¡£/æµ‹è¯•/é…ç½®åˆ†ç»„æäº¤
4. **è§„æ¨¡é˜ˆå€¼**ï¼šè¶…å¤§ diffï¼ˆ>300 è¡Œï¼‰å»ºè®®æ‹†åˆ†
5. **å¯å›æ»šæ€§**ï¼šç¡®ä¿æ¯ä¸ªæäº¤å¯ç‹¬ç«‹å›é€€

---

## ç¤ºä¾‹

**Good (ä½¿ç”¨ --emoji)**
```
âœ¨ feat(ui): add user authentication flow
ğŸ› fix(api): handle token refresh race condition
ğŸ“ docs: update API usage examples
```

**Good (ä¸ä½¿ç”¨ --emoji)**
```
feat(ui): add user authentication flow
fix(api): handle token refresh race condition
docs: update API usage examples
```

---

## æ³¨æ„äº‹é¡¹

- **ä»…ä½¿ç”¨ Git**ï¼šä¸è°ƒç”¨ä»»ä½•åŒ…ç®¡ç†å™¨/æ„å»ºå‘½ä»¤
- **å°Šé‡é’©å­**ï¼šé»˜è®¤æ‰§è¡Œæœ¬åœ° Git é’©å­
- **ä¸æ”¹æºç **ï¼šåªè¯»å†™ `.git/COMMIT_EDITMSG` ä¸æš‚å­˜åŒº
- **å®‰å…¨æç¤º**ï¼šåœ¨å†²çªçŠ¶æ€ä¸‹ä¼šå…ˆæç¤ºå¤„ç†
