---
description: 查看所有可用的 Agent 斜杠命令和使用指南
allowed-tools: Read(*)
---

# 可用的 Agent 命令

快速查看所有可用的 subagent 斜杠命令。

## 📖 符号说明

| 符号 | 含义 | 说明 |
|------|------|------|
| ⭐ | 高频使用命令 | 推荐优先掌握，覆盖常见开发场景 |
| ⭐⭐ | 最高优先级 | 核心工作流，适合复杂任务 |
| ⭐ P0 | 项目核心 | 项目必备命令，覆盖关键技术栈 |
| ⭐ NEW | 最新添加 | 新功能，建议尝试 |

---

## 🔍 智能分析类

- **`/analyze`** ⭐⭐ NEW - 根据描述自动识别场景并执行相应分析
- **`/debug`** ⭐ NEW - 多模型调试（Codex 后端诊断 + Gemini 前端诊断）

| 命令 | 核心功能 | 典型场景 |
|------|----------|----------|
| `/analyze "描述"` | 自动识别场景，执行对应分析策略 | 所有探索和分析任务 |
| `/debug "问题"` | 双模型并行诊断，支持修复全流程 | Bug 定位、问题排查、修复验证 |

**场景自动识别**：

| 输入示例 | 识别场景 | 执行策略 |
|----------|----------|----------|
| `/analyze "项目上下文"` | 上下文加载 | 生成结构化上下文摘要 |
| `/analyze "用户登录在哪"` | 代码探索 | 搜索文件和代码片段 |
| `/analyze "这个 bug 的原因"` | 深度分析 | Codex 深度分析报告 |
| `/analyze "性能瓶颈"` | 性能分析 | Bundle 体积 + 运行时性能 |
| `/analyze "依赖安全漏洞"` | 依赖分析 | 依赖图 + 安全审计 |
| `/analyze "路由配置"` | 路由分析 | 路由结构 + 懒加载检查 |
| `/analyze "状态管理"` | 状态分析 | Store 架构 + 性能问题 |
| `/analyze "翻译完整性"` | 国际化分析 | 翻译键完整性报告 |
| `/analyze "这个需求怎么拆"` | 需求分析 | 功能点 + 风险评估 |

---

## 🔎 审查类

- **`/diff-review`** ⭐ NEW - 基于 git diff 的通用代码审查（支持未提交代码、PR、MR）

| 命令 | 核心功能 | 典型场景 |
|------|----------|----------|
| `/diff-review` | 结构化审查报告（优先级、置信度、修复建议） | 提交前审查、PR/MR 审查、代码质量检查 |

**支持的审查来源**：

| 参数 | 来源 | 示例 |
|------|------|------|
| (默认) | 未暂存变更 | `/diff-review` |
| `--staged` | 已暂存变更 | `/diff-review --staged` |
| `--all` | 全部未提交 | `/diff-review --all` |
| `--branch <base>` | 对比分支 | `/diff-review --branch main` |

**输出格式**：结构化 Markdown（Summary + Findings），包含优先级（P0-P3）、置信度、行范围、修复建议

---

## 🧪 测试类

- **`/write-tests`** - Vitest 测试专家编写和改进测试代码

| 命令 | 核心功能 | 典型场景 |
|------|----------|----------|
| `/write-tests` | 完整测试代码、测试策略、覆盖率建议 | 新功能测试、回归测试、TDD开发 |

---

## ⚙️ 项目配置类

- **`/scan`** ⭐ - 智能项目扫描（`/workflow-start` 前置条件）

| 命令 | 核心功能 | 典型场景 |
|------|----------|----------|
| `/scan` | 检测技术栈、生成配置文件和项目上下文报告 | 新项目初始化、配置更新、架构变更后 |

**检测能力**：
- 项目类型（Monorepo/Single）
- 包管理器（pnpm/npm/yarn/go/cargo/pip）
- 框架版本（React/Vue/Angular/Go/Python/Rust等）
- 微前端框架（Wujie/Qiankun等）
- 可观测性工具（Sentry/Bugsnag等）
- 自定义路径（HTTP客户端、埋点、API等）
- **语义代码检索**（入口文件、API路由、数据模型、组件结构）🆕

**输出**：
- `.claude/config/project-config.json` - 项目配置文件
- `.claude/repo-context.md` - 项目上下文报告

---

## 🚀 工作流模板类

- **`/workflow-start`** ⭐⭐⭐ - 智能工作流（自动规划5-22步，支持自动记忆和恢复）
- **`/workflow-quick-dev`** ⭐ - 快速功能开发（3步：上下文加载 → 探索实现 → 快速验证）
- **`/workflow-ui-restore`** ⭐ - UI 设计稿还原（5步：Figma MCP 获取设计 → 分析规范 → 加载上下文 → 实现组件 → 质量验证）

### 🎉 用户级工作流存储（NEW）

**重要变更**：工作流状态文件存储在用户级目录，文档产物存储在项目目录，兼顾避免 Git 冲突和文档可访问性。

**存储位置**：
- 工作流状态：`~/.claude/workflows/{projectId}/workflow-state.json`（用户级，避免 Git 冲突）
- 上下文摘要：`.claude/context-summary-{task_name}.md`（项目级，按任务区分）
- Bug 报告：`.claude/bug-reports/`（项目级）
- 验证报告：`.claude/verification-report-{task_name}.md`（项目级，按任务区分）
- 操作日志：`.claude/operations-log-{task_name}.md`（项目级，按任务区分）
- 技术方案：`.claude/tech-design/{task_name}.md`（项目级，按任务区分）

**核心优势**：
- ✅ **完全避免 Git 冲突** - 工作流状态不在项目目录，天然隔离
- ✅ **多人协作无冲突** - 每个开发者管理自己的状态，互不干扰
- ✅ **自动项目识别** - 基于当前工作目录（cwd）自动识别项目
- ✅ **用户完全自主** - 不提交到 Git，完全由用户自己管理

**项目管理工具**：
- `/workflow-list-projects` - 列出所有工作流项目
- `/workflow-clean-old` - 清理长期未使用的项目
- `/workflow-link-project` - 项目路径变化后恢复工作流状态
- `/workflow-migrate-to-user` - 迁移旧版项目级状态到用户级

**详见**：`.claude/docs/user-level-workflow-design.md` 和 `.claude/docs/workflow-project-management.md`

| 命令 | 核心功能 | 典型场景 |
|------|----------|----------|
| `/workflow-start` + `/workflow-execute` | 智能规划步骤、自动记忆进度、双重Codex审查 | 所有复杂功能（自动适配简单/中等/复杂） |
| `/workflow-quick-dev` | 代码实现、简要测试 | 简单功能（<300行代码、<1天开发） |
| `/workflow-ui-restore` | UI组件代码、样式实现、响应式适配 | 设计稿还原、UI组件开发 |

### 工作流选择表

| 任务类型 | 任务复杂度 | 需求明确度 | 推荐工作流 |
|---------|-----------|-----------|-----------|
| 新功能开发 | 复杂（>500行） | - | `/workflow-start` ⭐⭐⭐ |
| 新功能开发 | 中等（300-500行） | - | `/workflow-start` 或 `/workflow-quick-dev` |
| 新功能开发 | 简单（<300行） | 明确 | `/workflow-quick-dev` |
| 新功能开发 | 简单（<300行） | 不明确 | `/workflow-start` |
| Bug 修复/调试 | - | - | `/debug` ⭐ |
| UI 还原 | - | - | `/workflow-ui-restore` |

---

## 🎯 快速选择指南

**我想...**
- **扫描项目（首次使用必须）** → `/scan` ⭐
- **开发任何功能（自动适配复杂度）** → `/workflow-start` ⭐⭐⭐
- **快速开发简单功能** → `/workflow-quick-dev` ⭐
- **调试/修复 Bug** → `/debug` ⭐ NEW
- **还原 Figma 设计稿** → `/workflow-ui-restore` ⭐
- **分析/探索任何问题** → `/analyze "描述"` ⭐⭐ NEW
- **审查代码变更** → `/diff-review` ⭐ NEW
- 编写测试 → `/write-tests`

---

## 🔄 典型场景快速参考

### 场景A：新功能开发
- **简单功能**：`/workflow-quick-dev "添加导出为 PDF 的按钮"`
- **复杂功能**：`/workflow-start "实现多租户权限管理系统，支持租户隔离和 RBAC"`

### 场景B：Bug 修复/调试（推荐使用 /debug）⭐
**多模型调试命令** ⭐ NEW:
```bash
# 问题描述
/debug "用户头像上传失败"
/debug "页面加载白屏"
/debug "API 返回 500 错误"
```

**核心功能**:
- ✅ Codex + Gemini 双模型并行诊断
- ✅ 后端/前端问题自动识别
- ✅ 交叉验证，综合分析
- ✅ Hard Stop 用户确认
- ✅ 修复后双模型审查
- ✅ 降级策略：模型不可用时自动降级

**手动组合模式**（仅供参考）：
1. 加载上下文：`/analyze "微前端路由同步上下文"`
2. 深度分析：`/analyze "路由同步异常原因"`
3. 修复验证：`/write-tests` 编写回归测试

**优先推荐**: 使用 `/debug` 命令，充分利用双模型的不同视角

### 场景C：性能优化
```bash
/analyze "性能瓶颈和优化建议"
```

### 场景D：代码审查
1. **Diff 审查**：`/diff-review`（审查未提交变更）或 `/diff-review --branch main`（审查整个分支）
2. 测试覆盖：`/write-tests`

### 场景E：重构工作流
1. 理解现有实现：`/analyze "支付模块上下文"`
2. 编写测试：`/write-tests`
3. 代码审查：`/diff-review --branch main`

### 场景F：国际化工作流
```bash
/analyze "翻译完整性检查"
```

---

## 💡 最佳实践

### 任务开始前
- **加载上下文**：`/analyze "项目上下文"` 快速建立项目认知
- **需求不明确**：`/analyze "需求拆解"` 先拆解需求

### 组合使用技巧
- **快速诊断模式**：`/analyze "问题描述"`
- **提交前审查模式**：`/diff-review --staged` → `/write-tests`

### 定期检查
- **性能优化**：`/analyze "性能瓶颈"`
- **新功能上线前**：`/diff-review --branch main` → `/write-tests`
- **安全审计**：`/analyze "依赖安全漏洞"`

### 测试策略
- **TDD模式**：先执行 `/write-tests` 编写测试，再实现功能
- **回归测试**：修复Bug后立即执行 `/write-tests` 补充测试
- **测试优先级**：核心业务逻辑 > 边界条件 > 异常处理

---

## 🤔 智能用户确认机制

### 何时触发确认

工作流会在以下情况**自动触发用户确认**：

1. **多个文件/组件选择**：发现多个功能相似的文件或组件，需要确认具体使用哪个
2. **技术方案选择**：实现方案有多种选择，需要用户决策偏好
3. **设计规范冲突**：Figma 设计稿与项目规范不一致
4. **响应式策略**：设计稿缺少移动端版本，需要确认适配方式

### 确认原则

- ✅ **及早确认**：在开始编码前完成所有确认，避免返工
- ✅ **明确选项**：提供清晰的选项描述和影响说明
- ✅ **避免过度**：仅在真正有歧义时确认，不要事事都问
- ✅ **记录决策**：将用户选择记录到技术方案文档或代码注释中
- ✅ **优先推断**：如果有明显最佳选择，可直接使用（并说明理由）

### 决策记录位置

- **完整开发工作流**：技术方案文档（`.claude/tech-design/[功能名称].md`）
- **快速开发工作流**：代码注释中简要说明
- **UI 还原工作流**：组件文件的注释中记录

---

## 💡 提示

- ⭐ 标记的是高优先级命令，覆盖项目核心场景
- Agent 会自主使用工具（Read、Grep、Bash 等）探索代码库
- 输出通常包含详细的分析报告和可操作的建议
- 所有命令都遵循项目的简体中文规范

**工作目录**：当前项目目录（自动识别 `process.cwd()`）

**总计**：8 个命令（2 个分析类 + 1 个审查类 + 1 个测试类 + 1 个项目配置类 + 3 个工作流模板类）
